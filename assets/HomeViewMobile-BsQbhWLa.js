import{c as a,a as t,w as C,v as T,u,b as $,i as v,n as j,F as h,r as y,d as I,e as m,o as r,t as x}from"./index-BcoM3oMr.js";import{_ as S,L as p}from"./leaflet-src-km7KyCu3.js";const z={class:"min-h-screen w-full bg-slate-50 text-slate-900"},M={class:"px-5 py-4 space-y-4"},P={class:"rounded-xl border border-slate-200 bg-white shadow-sm"},V={class:"p-4"},D={class:"relative"},L={class:"mt-4 flex gap-2"},B={class:"mt-6"},F={class:"max-h-80 overflow-auto rounded-lg border border-slate-200"},O={key:0,class:"p-4"},E={class:"space-y-2"},G={key:1,class:"divide-y divide-slate-100"},K={class:"flex items-center justify-between px-4 py-2"},N={class:"text-sm text-slate-600"},R={key:0,class:"text-sm text-orange-500"},U={key:1,class:"text-sm font-medium text-emerald-600"},q={key:2,class:"text-sm text-slate-800"},H={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/50 px-6"},Y={class:"w-full max-w-sm rounded-xl border border-slate-200 bg-white p-6 shadow-lg"},A={class:"mt-4 flex justify-end"},X={__name:"HomeViewMobile",setup(J){let i=m(""),c=m(""),n=m(!1),d=m(!1);async function b(){n.value=!0;const l=i.value?`/${i.value}/json`:"/json";let e={};try{const o=await fetch(`https://ipapi.co${l}`,{method:"GET"});if(o.status===429){d.value=!0,c.value={},n.value=!1;return}e=await o.json(),c.value=e}catch{c.value={}}n.value=!1;var s=p.DomUtil.get("map");s!=null&&(s._leaflet_id=null),e&&e.latitude&&e.longitude&&w(e.latitude,e.longitude,e.ip)}b();function w(l,e,s){var o=p.map("map").setView([l,e],12);p.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',tileSize:512,zoomOffset:-1}).addTo(o);var k=p.marker([l,e]).addTo(o);p.circle([l,e],{color:"red",fillColor:"#f03",fillOpacity:.2,radius:5e3}).addTo(o),k.bindTooltip(`<center><b>IP Tracking</b></center><hr style="border-top: 3px solid #bbb;">Your IP : ${s}`)}function f(l){i.value=l,b()}const g=["ip","postal","latitude","longitude","utc_offset","country_calling_code","country_area","country_population"];function _(l){for(let e=0;e<g.length;e++)if(l===g[e])return!0}return(l,e)=>(r(),a("div",z,[e[12]||(e[12]=t("header",{class:"w-full border-b border-slate-200 bg-white"},[t("div",{class:"px-5 py-4"},[t("h1",{class:"text-lg font-semibold tracking-tight"},"IP Tracking")])],-1)),t("main",M,[t("section",P,[t("div",V,[t("div",D,[C(t("input",{class:"w-full h-11 rounded-lg border border-slate-300 bg-white px-4 pr-12 text-sm placeholder-slate-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20",type:"search",name:"search",placeholder:"Search IP address","onUpdate:modelValue":e[0]||(e[0]=s=>v(i)?i.value=s:i=s),onKeyup:e[1]||(e[1]=$(s=>b(),["enter"]))},null,544),[[T,u(i)]]),t("button",{type:"submit",class:"absolute right-2 top-1.5 inline-flex h-8 w-8 items-center justify-center rounded-md border border-slate-300 bg-white text-slate-600 hover:bg-slate-50",onClick:e[2]||(e[2]=s=>b()),"aria-label":"Search"},[...e[7]||(e[7]=[t("img",{class:"h-4 w-4",src:S,alt:""},null,-1)])])]),t("div",L,[t("button",{class:"rounded-md border border-slate-300 bg-white px-3 py-2 text-xs text-slate-700 hover:bg-slate-50",onClick:e[3]||(e[3]=s=>f(""))}," My IP "),t("button",{class:"rounded-md border border-slate-300 bg-white px-3 py-2 text-xs text-slate-700 hover:bg-slate-50",onClick:e[4]||(e[4]=s=>f("8.8.8.8"))}," 8.8.8.8 "),t("button",{class:"rounded-md border border-slate-300 bg-white px-3 py-2 text-xs text-slate-700 hover:bg-slate-50",onClick:e[5]||(e[5]=s=>f("2001:4860:4860::8888"))}," 2001:4860:4860::8888 ")]),t("div",B,[t("div",F,[t("div",{class:j({"animate-pulse":u(n)})},[u(n)===!0?(r(),a("div",O,[t("ul",E,[(r(),a(h,null,y(12,s=>t("li",null,[...e[8]||(e[8]=[t("div",{class:"h-5 w-full rounded bg-slate-200"},null,-1)])])),64))])])):(r(),a("div",G,[t("ul",null,[(r(!0),a(h,null,y(u(c),(s,o)=>(r(),a("li",K,[t("span",N,x(o),1),s===""?(r(),a("span",R,"-")):_(o)?(r(),a("span",U,x(s),1)):(r(),a("span",q,x(s),1))]))),256))])]))],2)])])])]),e[9]||(e[9]=t("section",{class:"rounded-xl border border-slate-200 bg-white shadow-sm"},[t("div",{class:"p-3"},[t("div",{id:"map",class:"h-[380px] w-full rounded-lg"})])],-1))]),u(d)?(r(),a("div",H,[t("div",Y,[e[10]||(e[10]=t("div",{class:"text-lg font-semibold"},"Sorry",-1)),e[11]||(e[11]=t("p",{class:"mt-2 text-sm text-slate-600"}," Too many requests. Try again later. ",-1)),t("div",A,[t("button",{class:"rounded-md border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 hover:bg-slate-50",onClick:e[6]||(e[6]=s=>v(d)?d.value=!1:d=!1)}," Close ")])])])):I("",!0)]))}};export{X as default};
